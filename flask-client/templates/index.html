{% extends "base.html" %}

{% block title %}Belt Vision - Home{% endblock %}
{% block nav_home %}active{% endblock %}

{% block content %}
<h1>Belt Vision Board</h1>

<h2>Quick Video Tests</h2>
<button id="toggleVideo" class="btn" type="button">Start Webcam Video</button><br/>
<img id="webcamVideoFeed" width="640" style="display:none" alt="Video feed will appear here"><br/>

<button id="toggleLegacyVideo" class="btn" type="button">Start Legacy Camera Video</button><br/>
<img id="legacyVideoFeed" width="640" style="display:none" alt="Video feed will appear here">
{% endblock %}

{% block additional_scripts %}
<script>
    (function(){
        const btn = document.getElementById('toggleVideo');
        const img = document.getElementById('webcamVideoFeed');
        let running = false;

        btn.addEventListener('click', function(){
            if (!running) {
                img.src = '/video';
                img.style.display = 'block';
                btn.textContent = 'Stop Video';
                running = true;
            } else {
                img.removeAttribute('src');
                img.style.display = 'none';
                btn.textContent = 'Start Video';
                running = false;
            }
        });
    })();
</script>

<script>
    (function(){
        const btn = document.getElementById('toggleLegacyVideo');
        const img = document.getElementById('legacyVideoFeed');
        let running = false;

        btn.addEventListener('click', function(){
            if (!running) {
                img.src = '/legacy-camera-video';
                img.style.display = 'block';
                btn.textContent = 'Stop Legacy Camera Video';
                running = true;
            } else {
                img.removeAttribute('src');
                img.style.display = 'none';
                btn.textContent = 'Start Legacy Camera Video';
                running = false;
            }
        });
    })();
</script>
{% endblock %}